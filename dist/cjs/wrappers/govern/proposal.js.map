{"version":3,"file":"proposal.js","sourceRoot":"","sources":["../../../../src/wrappers/govern/proposal.ts"],"names":[],"mappings":";;;;AAAA,0DAAuB;AAGvB,mCAAwC;AAExC;;;GAGG;AACI,MAAM,gBAAgB,GAAG,CAAC,EAC/B,YAAY,EACZ,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,IAAK,CAAC,GAI9D,EAAiB,EAAE;IAClB,IAAI,YAAY,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,eAAE,CAAC,CAAC,CAAC,CAAC,EAAE;QACzC,OAAO,qBAAa,CAAC,QAAQ,CAAC;KAC/B;SAAM,IAAI,YAAY,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,eAAE,CAAC,CAAC,CAAC,CAAC,EAAE;QACjD,OAAO,qBAAa,CAAC,KAAK,CAAC;KAC5B;SAAM,IAAI,YAAY,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,eAAE,CAAC,kBAAkB,CAAC,CAAC,EAAE;QACpE,OAAO,qBAAa,CAAC,MAAM,CAAC;KAC7B;SAAM,IACL,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC;QACpD,YAAY,CAAC,QAAQ;aAClB,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC;aAC9B,GAAG,CAAC,YAAY,CAAC,YAAY,CAAC;aAC9B,EAAE,CAAC,YAAY,CAAC,WAAW,CAAC,EAC/B;QACA,OAAO,qBAAa,CAAC,QAAQ,CAAC;KAC/B;SAAM,IAAI,YAAY,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,eAAE,CAAC,CAAC,CAAC,CAAC,EAAE;QAC9C,OAAO,qBAAa,CAAC,MAAM,CAAC;KAC7B;IACD,OAAO,qBAAa,CAAC,SAAS,CAAC;AACjC,CAAC,CAAC;AAzBW,QAAA,gBAAgB,oBAyB3B","sourcesContent":["import BN from \"bn.js\";\n\nimport type { ProposalData } from \"../../programs/govern\";\nimport { ProposalState } from \"./types\";\n\n/**\n * Gets the state of a proposal.\n * @returns\n */\nexport const getProposalState = ({\n  proposalData,\n  currentTimeSeconds = Math.floor(new Date().getTime() / 1_000),\n}: {\n  proposalData: ProposalData;\n  currentTimeSeconds?: number;\n}): ProposalState => {\n  if (proposalData.canceledAt.gt(new BN(0))) {\n    return ProposalState.Canceled;\n  } else if (proposalData.activatedAt.eq(new BN(0))) {\n    return ProposalState.Draft;\n  } else if (proposalData.votingEndsAt.gte(new BN(currentTimeSeconds))) {\n    return ProposalState.Active;\n  } else if (\n    proposalData.forVotes.lte(proposalData.againstVotes) ||\n    proposalData.forVotes\n      .add(proposalData.abstainVotes)\n      .add(proposalData.againstVotes)\n      .lt(proposalData.quorumVotes)\n  ) {\n    return ProposalState.Defeated;\n  } else if (proposalData.queuedAt.gt(new BN(0))) {\n    return ProposalState.Queued;\n  }\n  return ProposalState.Succeeded;\n};\n"]}